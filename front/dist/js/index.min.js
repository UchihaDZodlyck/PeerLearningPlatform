function Banner(){this.viewportWidth=735,this.BannerViewport=$("#viewport"),this.index=1,this.bannerUL=$("#banner-ul"),this.liList=this.bannerUL.children("li"),this.liCount=this.liList.length,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerControl=$(".banner-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.liCount-1).clone();n.bannerUL.append(t),n.bannerUL.prepend(e),n.bannerUL.css({width:n.viewportWidth*(n.liCount+2),left:-n.viewportWidth})},Banner.prototype.initBannerControl=function(){for(var n=this,t=0;t<n.liCount;t++){var e=$("<li></li>");n.bannerControl.append(e),0===t&&e.addClass("active")}n.bannerControl.css({width:12*n.liCount+4+4*(n.liCount-1)})},Banner.prototype.animate=function(){var n=this;n.bannerUL.stop().animate({left:-n.viewportWidth*n.index},500);var t=n.index;t=0===t?n.liCount-1:t===n.liCount+1?0:n.index-1,n.bannerControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.toggleArrow=function(n){var t=this;1==n?(t.leftArrow.show(),t.rightArrow.show()):(t.leftArrow.hide(),t.rightArrow.hide())},Banner.prototype.looping=function(){var n=this;n.timer=setInterval(function(){n.index>=n.liCount+1?(n.bannerUL.css({left:-n.viewportWidth}),n.index=2):n.index++,n.animate()},3e3)},Banner.prototype.ListenHoverBannerControl=function(){var e=this;e.bannerControl.children("li").each(function(n,t){$(t).hover(function(){e.index=n+1,e.animate(),clearInterval(e.timer)},function(){e.looping()})})},Banner.prototype.ListenClickArrow=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUL.css({left:-n.viewportWidth*n.liCount}),n.index=n.liCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.liCount+1?(n.bannerUL.css({left:-n.viewportWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.BannerViewport.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.looping(),n.toggleArrow(!1)})},Banner.prototype.run=function(){this.initBanner(),this.initBannerControl(),this.looping(),this.ListenClickArrow(),this.listenBannerHover(),this.ListenHoverBannerControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){plpajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var a=this;$(".list-tab").children().click(function(){var r=$(this),o=r.attr("data-category");plpajax.get({url:"/news/list/",data:{category_id:o,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active"),a.loadBtn.show()}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJ2aWV3cG9ydFdpZHRoIiwiQmFubmVyVmlld3BvcnQiLCIkIiwiaW5kZXgiLCJiYW5uZXJVTCIsImxpTGlzdCIsImNoaWxkcmVuIiwibGlDb3VudCIsImxlbmd0aCIsImxlZnRBcnJvdyIsInJpZ2h0QXJyb3ciLCJiYW5uZXJDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRCYW5uZXJDb250cm9sIiwiaSIsImNpcmNsZSIsImFkZENsYXNzIiwiYW5pbWF0ZSIsInN0b3AiLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwidG9nZ2xlQXJyb3ciLCJpc1Nob3ciLCJzaG93IiwiaGlkZSIsImxvb3BpbmciLCJ0aW1lciIsInNldEludGVydmFsIiwiTGlzdGVuSG92ZXJCYW5uZXJDb250cm9sIiwiZWFjaCIsIm9iaiIsImhvdmVyIiwiY2xlYXJJbnRlcnZhbCIsIkxpc3RlbkNsaWNrQXJyb3ciLCJjbGljayIsImxpc3RlbkJhbm5lckhvdmVyIiwicnVuIiwibGlzdGVuTG9hZE1vcmVFdmVudCIsInBscGFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwicCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzZXMiLCJ0cGwiLCJ0ZW1wbGF0ZSIsImxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQiLCJsaSIsImF0dHIiLCJuZXdzTGlzdEdyb3VwIiwiZW1wdHkiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFNBQ0xDLEtBQUtDLGNBQWdCLElBQ3JCRCxLQUFLRSxlQUFpQkMsRUFBRSxhQUN4QkgsS0FBS0ksTUFBUSxFQUNiSixLQUFLSyxTQUFXRixFQUFFLGNBQ2xCSCxL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ZUEsRUFDZjBDLEVBTEcsR0FPUEMsUUFBVyxTQUFVQyxHQUNqQixHQUFzQixNQUFuQkEsRUFBYSxLQUFVLENBQ3RCLElBQUlDLEVBQVNELEVBQWEsS0FDdEJFLEVBQU1DLFNBQVMsWUFBWSxDQUFDRixPQUFTQSxJQUNyQ00sRUFBZ0JoRSxFQUFFLHFCQUV0QmdFLEVBQWNDLFFBQ2RELEVBQWMzQyxPQUFPc0MsR0FDckJoRCxFQUFLQyxLQUFPLEVBQ1pELEVBQUtFLFlBQWNBLEVBQ25CaUQsRUFBR2pDLFNBQVMsVUFBVUcsV0FBV0MsWUFBWSxVQUM3Q3RCLEVBQUtHLFFBQVFzQixjQVNqQzFCLE1BQU1LLFVBQVVrQyxJQUFNLFdBQ1BwRCxLQUNOcUQsc0JBRE1yRCxLQUVOZ0UsNkJBSVQ3RCxFQUFFLFlBQ2UsSUFBSUosUUFDVnFELE9BRUssSUFBSXZDLE9BQ1Z1QyIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXIoKSB7XHJcbiAgICB0aGlzLnZpZXdwb3J0V2lkdGggPSA3MzU7XHJcbiAgICB0aGlzLkJhbm5lclZpZXdwb3J0ID0gJChcIiN2aWV3cG9ydFwiKTtcclxuICAgIHRoaXMuaW5kZXggPSAxO1xyXG4gICAgdGhpcy5iYW5uZXJVTCA9ICQoXCIjYmFubmVyLXVsXCIpO1xyXG4gICAgdGhpcy5saUxpc3QgPSB0aGlzLmJhbm5lclVMLmNoaWxkcmVuKFwibGlcIik7XHJcbiAgICB0aGlzLmxpQ291bnQgPSB0aGlzLmxpTGlzdC5sZW5ndGg7XHJcbiAgICB0aGlzLmxlZnRBcnJvdyA9ICQoXCIubGVmdC1hcnJvd1wiKTtcclxuICAgIHRoaXMucmlnaHRBcnJvdyA9ICQoXCIucmlnaHQtYXJyb3dcIik7XHJcbiAgICB0aGlzLmJhbm5lckNvbnRyb2wgPSAkKFwiLmJhbm5lci1jb250cm9sXCIpO1xyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRCYW5uZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcSgwKS5jbG9uZSgpO1xyXG4gICAgdmFyIGxhc3RCYW5uZXIgPSBzZWxmLmxpTGlzdC5lcShzZWxmLmxpQ291bnQgLSAxKS5jbG9uZSgpO1xyXG4gICAgc2VsZi5iYW5uZXJVTC5hcHBlbmQoZmlyc3RCYW5uZXIpO1xyXG4gICAgc2VsZi5iYW5uZXJVTC5wcmVwZW5kKGxhc3RCYW5uZXIpO1xyXG4gICAgc2VsZi5iYW5uZXJVTC5jc3Moe1wid2lkdGhcIjogc2VsZi52aWV3cG9ydFdpZHRoICogKHNlbGYubGlDb3VudCArIDIpLCBcImxlZnRcIjogLXNlbGYudmlld3BvcnRXaWR0aH0pO1xyXG59XHJcblxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0QmFubmVyQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYubGlDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIik7XHJcbiAgICAgICAgc2VsZi5iYW5uZXJDb250cm9sLmFwcGVuZChjaXJjbGUpO1xyXG4gICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZWxmLmJhbm5lckNvbnRyb2wuY3NzKHtcIndpZHRoXCI6IHNlbGYubGlDb3VudCAqIDEyICsgMiAqIDIgKyAoc2VsZi5saUNvdW50IC0gMSkgKiA0fSlcclxufVxyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuYmFubmVyVUwuc3RvcCgpLmFuaW1hdGUoe1wibGVmdFwiOiAtc2VsZi52aWV3cG9ydFdpZHRoICogc2VsZi5pbmRleH0sIDUwMCk7XHJcbiAgICB2YXIgaW5kZXggPSBzZWxmLmluZGV4O1xyXG4gICAgaWYgKGluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgaW5kZXggPSBzZWxmLmxpQ291bnQgLSAxO1xyXG4gICAgfSBlbHNlIGlmIChpbmRleCA9PT0gc2VsZi5saUNvdW50ICsgMSkge1xyXG4gICAgICAgIGluZGV4ID0gMFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpbmRleCA9IHNlbGYuaW5kZXggLSAxO1xyXG4gICAgfVxyXG4gICAgc2VsZi5iYW5uZXJDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZXEoaW5kZXgpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbn1cclxuXHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24gKGlzU2hvdykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgaWYgKGlzU2hvdyA9PSB0cnVlKSB7XHJcbiAgICAgICAgc2VsZi5sZWZ0QXJyb3cuc2hvdygpO1xyXG4gICAgICAgIHNlbGYucmlnaHRBcnJvdy5zaG93KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNlbGYubGVmdEFycm93LmhpZGUoKTtcclxuICAgICAgICBzZWxmLnJpZ2h0QXJyb3cuaGlkZSgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5sb29waW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgIHNlbGYudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcImJlZm9yZTogXCIsIHNlbGYuaW5kZXgpO1xyXG4gICAgICAgIGlmIChzZWxmLmluZGV4ID49IHNlbGYubGlDb3VudCArIDEpIHtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVTC5jc3Moe1wibGVmdFwiOiAtc2VsZi52aWV3cG9ydFdpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIkFmdGVyOiBcIiwgc2VsZi5pbmRleCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIj09PT09PT09PT09PT09PT09PT09PT09PT09XCIpXHJcbiAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICB9LCAzMDAwKVxyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLkxpc3RlbkhvdmVyQmFubmVyQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuYmFubmVyQ29udHJvbC5jaGlsZHJlbihcImxpXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBvYmopIHtcclxuICAgICAgICAkKG9iaikuaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gaW5kZXggKyAxO1xyXG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTtcclxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYubG9vcGluZygpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLkxpc3RlbkNsaWNrQXJyb3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxlZnRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVTC5jc3Moe1wibGVmdFwiOiAtc2VsZi52aWV3cG9ydFdpZHRoICogc2VsZi5saUNvdW50fSlcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IHNlbGYubGlDb3VudCAtIDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pXHJcblxyXG4gICAgc2VsZi5yaWdodEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gc2VsZi5saUNvdW50ICsgMSkge1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVMLmNzcyh7XCJsZWZ0XCI6IC1zZWxmLnZpZXdwb3J0V2lkdGh9KVxyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSlcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQmFubmVySG92ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLkJhbm5lclZpZXdwb3J0LmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKHNlbGYudGltZXIpO1xyXG4gICAgICAgIHNlbGYudG9nZ2xlQXJyb3codHJ1ZSk7XHJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5sb29waW5nKCk7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyhmYWxzZSk7XHJcbiAgICB9KVxyXG59O1xyXG5cclxuXHJcbkJhbm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5pbml0QmFubmVyKCk7XHJcbiAgICB0aGlzLmluaXRCYW5uZXJDb250cm9sKCk7XHJcbiAgICB0aGlzLmxvb3BpbmcoKTtcclxuICAgIHRoaXMuTGlzdGVuQ2xpY2tBcnJvdygpO1xyXG4gICAgdGhpcy5saXN0ZW5CYW5uZXJIb3ZlcigpO1xyXG4gICAgdGhpcy5MaXN0ZW5Ib3ZlckJhbm5lckNvbnRyb2woKTtcclxufTtcclxuXHJcblxyXG5mdW5jdGlvbiBJbmRleCgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYucGFnZSA9IDI7XHJcbiAgICBzZWxmLmNhdGVnb3J5X2lkID0gMDtcclxuICAgIHNlbGYubG9hZEJ0biA9ICQoXCIjbG9hZC1tb3JlLWJ0blwiKTtcclxuXHJcblxyXG59XHJcblxyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRNb3JlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgbG9hZEJ0biA9ICQoXCIjbG9hZC1tb3JlLWJ0blwiKTtcclxuICAgIGxvYWRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHBscGFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3AnOiBzZWxmLnBhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzogc2VsZi5jYXRlZ29yeV9pZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdzZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIiwge1wibmV3c2VzXCI6IG5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSAkKFwiLmxpc3QtaW5uZXItZ3JvdXBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVsLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkQnRuLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdGFiR3JvdXAgPSAkKFwiLmxpc3QtdGFiXCIpO1xyXG4gICAgdGFiR3JvdXAuY2hpbGRyZW4oKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gdGhpczogPGxpPjwvbGk+XHJcbiAgICAgICAgdmFyIGxpID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnlfaWQgPSBsaS5hdHRyKFwiZGF0YS1jYXRlZ29yeVwiKTtcclxuICAgICAgICB2YXIgcGFnZSA9IDE7XHJcbiAgICAgICAgcGxwYWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL2xpc3QvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBjYXRlZ29yeV9pZCxcclxuICAgICAgICAgICAgICAgICdwJzogcGFnZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIix7XCJuZXdzZXNcIjpuZXdzZXN9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c0xpc3RHcm91cCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2VtcHR5KCkgLT4gZGVsZXRlIGFsbCB0aGUgY2hpbGRyZW4gZWxlbWVudHMgb2YgdGhpcyB0YWdcclxuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSBjYXRlZ29yeV9pZDtcclxuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkQnRuLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuXHJcbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkxvYWRNb3JlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCgpO1xyXG59O1xyXG5cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcclxuICAgIGJhbm5lci5ydW4oKTtcclxuXHJcbiAgICB2YXIgaW5kZXggPSBuZXcgSW5kZXgoKTtcclxuICAgIGluZGV4LnJ1bigpO1xyXG59KTsiXX0=
