function FrontBase(){}function Auth(){var t=this;t.maskWrapper=$(".mask-wrapper"),t.scrollWrapper=$(".scroll-wrapper"),t.smsCaptcha=$(".sms-captcha-btn")}function TopBtn(){this.topBtn=$("#myBtn")}FrontBase.prototype.run=function(){this.listenAuthBoxHover()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},TopBtn.prototype.run=function(){this.listenScroll()},TopBtn.prototype.listenScroll=function(){var t=this;window.scroll(function(){t.scrollFunction()})},TopBtn.prototype.scrollFunction=function(){20<document.body.scrollTop||20<document.documentElement.scrollTop?this.topBtn.style.display="block":this.topBtn.style.display="none"},TopBtn.prototype.listenTopBtn=function(){this.topBtn.click(function(){document.body.scrollTop=0,document.documentElement.scrollTop=0})},Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenImgCaptchaEvent(),t.listenSmsCaptchaEvent(),t.listenSignupEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.smsSuccessEvent=function(){var t=this;messageBox.showSuccess("Send email success!"),t.smsCaptcha.addClass("disabled");var n=30;t.smsCaptcha.unbind("click");var e=setInterval(function(){t.smsCaptcha.text(n+"s"),--n<=0&&(clearInterval(e),t.smsCaptcha.removeClass("disabled"),t.smsCaptcha.text("Send Code"),t.listenSmsCaptchaEvent())},1e3)},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),o=$(".close-btn");$(".scroll-wrapper");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),o.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.listenSmsCaptchaEvent=function(){var n=this,t=$(".sms-captcha-btn"),e=$(".signup-group input[name='email']");t.click(function(){var t=e.val();t?plpajax.get({url:"/account/sms_captcha",data:{email:t},success:function(t){200==t.code&&n.smsSuccessEvent()},fail:function(t){console.log(t)}}):messageBox.showInfo("Please input your email address!")})},Auth.prototype.listenSigninEvent=function(){var o=this,t=$(".signin-group"),s=t.find("input[name='email']"),a=t.find("input[name='password']"),i=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=s.val(),n=a.val(),e=i.prop("checked");plpajax.post({url:"/account/login/",data:{email:t,password:n,remember:e?1:0},success:function(t){o.hideEvent(),window.location.reload()}})})},Auth.prototype.listenSignupEvent=function(){var h=$(".signup-group");h.find(".submit-btn").click(function(t){t.preventDefault(),console.log("man!");var n=h.find("input[name='email']"),e=h.find("input[name='username']"),o=h.find("input[name='img_captcha']"),s=h.find("input[name='password1']"),a=h.find("input[name='password2']"),i=h.find("input[name='sms_captcha']"),c=n.val(),r=e.val(),p=o.val(),u=s.val(),l=a.val(),m=i.val();console.log("dude"),plpajax.post({url:"/account/register/",data:{email:c,username:r,img_captcha:p,password1:u,password2:l,sms_captcha:m},success:function(t){200==t.code&&window.location.reload()}})})},$(function(){(new Auth).run()}),$(function(){(new FrontBase).run()}),$(function(){(new TopBtn).run()}),$(function(){template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),o=((new Date).getTime()-e)/1e3;if(o<60)return"Just Now";if(60<=o&&o<3600)return minutes=parseInt(o/60),minutes+" Minutes";if(3600<=o&&o<86400)return hours=parseInt(o/60/60),hours+" Hours";if(86400<=o&&o<2592e3)return days=parseInt(o/60/60/24),days+" Days";var s=n.getFullYear(),a=n.getMonth(),i=n.getDay();return n.getHours()+":"+n.getMinutes()+" "+i+"/"+a+"/"+s})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInNlbGYiLCJ0aGlzIiwibWFza1dyYXBwZXIiLCIkIiwic2Nyb2xsV3JhcHBlciIsInNtc0NhcHRjaGEiLCJUb3BCdG4iLCJ0b3BCdG4iLCJwcm90b3R5cGUiLCJydW4iLCJsaXN0ZW5BdXRoQm94SG92ZXIiLCJhdXRoQm94IiwidXNlck1vcmVCb3giLCJob3ZlciIsInNob3ciLCJoaWRlIiwibGlzdGVuU2Nyb2xsIiwid2luZG93Iiwic2Nyb2xsIiwic2Nyb2xsRnVuY3Rpb24iLCJkb2N1bWVudCIsImJvZHkiLCJzY3JvbGxUb3AiLCJkb2N1bWVudEVsZW1lbnQiLCJzdHlsZSIsImRpc3BsYXkiLCJsaXN0ZW5Ub3BCdG4iLCJjbGljayIsImxpc3RlblNob3dIaWRlRXZlbnQiLCJsaXN0ZW5Td2l0Y2hFdmVudCIsImxpc3RlblNpZ25pbkV2ZW50IiwibGlzdGVuSW1nQ2FwdGNoYUV2ZW50IiwibGlzdGVuU21zQ2FwdGNoYUV2ZW50IiwibGlzdGVuU2lnbnVwRXZlbnQiLCJzaG93RXZlbnQiLCJoaWRlRXZlbnQiLCJzbXNTdWNjZXNzRXZlbnQiLCJtZXNzYWdlQm94Iiwic2hvd1N1Y2Nlc3MiLCJhZGRDbGFzcyIsImNvdW50IiwidW5iaW5kIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsInRleHQiLCJjbGVhckludGVydmFsIiwicmVtb3ZlQ2xhc3MiLCJzaWduaW5CdG4iLCJzaWdudXBCdG4iLCJjbG9zZUJ0biIsImNzcyIsImxlZnQiLCJjdXJyZW50TGVmdCIsInBhcnNlSW50IiwiYW5pbWF0ZSIsImltZ0NhcHRjaGEiLCJhdHRyIiwiTWF0aCIsInJhbmRvbSIsImVtYWlsQWRkcmVzc0lucHV0IiwiZW1haWxBZGRyZXNzIiwidmFsIiwicGxwYWpheCIsImdldCIsInVybCIsImRhdGEiLCJlbWFpbCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJmYWlsIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwic2hvd0luZm8iLCJzaWduaW5Hcm91cCIsImVtYWlsSW5wdXQiLCJmaW5kIiwicGFzc3dvcmRJbnB1dCIsInJlbWVtYmVySW5wdXQiLCJwYXNzd29yZCIsInJlbWVtYmVyIiwicHJvcCIsInBvc3QiLCJsb2NhdGlvbiIsInJlbG9hZCIsInNpZ251cEdyb3VwIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJuYW1lSW5wdXQiLCJpbWdDYXB0Y2hhSW5wdXQiLCJwYXNzd29yZDFJbnB1dCIsInBhc3N3b3JkMklucHV0Iiwic21zQ2FwdGNoYUlucHV0IiwidXNlcm5hbWUiLCJpbWdfY2FwdGNoYSIsInBhc3N3b3JkMSIsInBhc3N3b3JkMiIsInNtc19jYXB0Y2hhIiwidGVtcGxhdGUiLCJkZWZhdWx0cyIsImltcG9ydHMiLCJ0aW1lU2luY2UiLCJkYXRlVmFsdWUiLCJkYXRlIiwiRGF0ZSIsImRhdGV0cyIsImdldFRpbWUiLCJ0aW1lc3RhbXAiLCJtaW51dGVzIiwiaG91cnMiLCJkYXlzIiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJnZXRNb250aCIsImRheSIsImdldERheSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBU0EsYUFtQlQsU0FBU0MsT0FDTCxJQUFJQyxFQUFPQyxLQUNYRCxFQUFLRSxZQUFjQyxFQUFFLGlCQUNyQkgsRUFBS0ksY0FBZ0JELEVBQUUsbUJBQ3ZCSCxFQUFLSyxXQUFhRixFQUFFLG9CQUd4QixTQUFTRyxTQUNNTCxLQUNOTSxPQUFTSixFQUFFLFVBekJwQkwsVUFBVVUsVUFBVUMsSUFBTSxXQUNYUixLQUNOUyxzQkFHVFosVUFBVVUsVUFBVUUsbUJBQXFCLFdBQ3JDLElBQUlDLEVBQVVSLEVBQUUsYUFDWlMsRUFBY1QsRUFBRSxrQkFDcEJRLEVBQVFFLE1BQU0sV0FDVkQsRUFBWUUsUUFDYixXQUNDRixFQUFZRyxVQWlCcEJULE9BQU9FLFVBQVVDLElBQU0sV0FDUlIsS0FDTmUsZ0JBRVRWLE9BQU9FLFVBQVVR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LFlBQ2EsSUFBSUosTUFDVlUsUUFHVE4sRUFBRSxZQUNrQixJQUFJTCxXQUNWVyxRQUVkTixFQUFFLFlBQ1ksSUFBSUcsUUFDVkcsUUFFUk4sRUFBRSxXQUNNK0YsV0FDQUEsU0FBU0MsU0FBU0MsUUFBUUMsVUFBWSxTQUFVQyxHQUM1QyxJQUFJQyxFQUFPLElBQUlDLEtBQUtGLEdBQ2hCRyxFQUFTRixFQUFLRyxVQUVkQyxJQURRLElBQUtILE1BQVFFLFVBQ0FELEdBQVUsSUFFbkMsR0FBSUUsRUFBWSxHQUNaLE1BQU8sV0FDSixHQUFpQixJQUFiQSxHQUFtQkEsRUFBWSxLQUV0QyxPQURBQyxRQUFVdkQsU0FBU3NELEVBQVksSUFDeEJDLFFBQVUsV0FDZCxHQUFpQixNQUFiRCxHQUF3QkEsRUFBWSxNQUUzQyxPQURBRSxNQUFReEQsU0FBU3NELEVBQVksR0FBSyxJQUMzQkUsTUFBUSxTQUNaLEdBQWlCLE9BQWJGLEdBQTZCQSxFQUFZLE9BRWhELE9BREFHLEtBQU96RCxTQUFTc0QsRUFBWSxHQUFLLEdBQUssSUFDL0JHLEtBQU8sUUFFZCxJQUFJQyxFQUFPUixFQUFLUyxjQUNaQyxFQUFRVixFQUFLVyxXQUNiQyxFQUFNWixFQUFLYSxTQUdmLE9BRldiLEVBQUtjLFdBRUYsSUFERGQsRUFBS2UsYUFDVyxJQUFNSCxFQUFNLElBQU1GLEVBQVEsSUFBTUYiLCJmaWxlIjoiZnJvbnRfYmFzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2ZvciBuYXYgYmFyXHJcbmZ1bmN0aW9uIEZyb250QmFzZSgpIHtcclxufVxyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkF1dGhCb3hIb3ZlcigpO1xyXG59O1xyXG5cclxuRnJvbnRCYXNlLnByb3RvdHlwZS5saXN0ZW5BdXRoQm94SG92ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXV0aEJveCA9ICQoXCIuYXV0aC1ib3hcIik7XHJcbiAgICB2YXIgdXNlck1vcmVCb3ggPSAkKFwiLnVzZXItbW9yZS1ib3hcIik7XHJcbiAgICBhdXRoQm94LmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1c2VyTW9yZUJveC5zaG93KCk7XHJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXNlck1vcmVCb3guaGlkZSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vL0ZvciBsb2dpbiBhbmQgcmVnaXN0ZXJcclxuZnVuY3Rpb24gQXV0aCgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKCcubWFzay13cmFwcGVyJyk7XHJcbiAgICBzZWxmLnNjcm9sbFdyYXBwZXIgPSAkKFwiLnNjcm9sbC13cmFwcGVyXCIpO1xyXG4gICAgc2VsZi5zbXNDYXB0Y2hhID0gJChcIi5zbXMtY2FwdGNoYS1idG5cIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFRvcEJ0bigpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYudG9wQnRuID0gJCgnI215QnRuJyk7XHJcbn1cclxuXHJcblRvcEJ0bi5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5TY3JvbGwoKTtcclxufTtcclxuVG9wQnRuLnByb3RvdHlwZS5saXN0ZW5TY3JvbGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB3aW5kb3cuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNjcm9sbEZ1bmN0aW9uKCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblRvcEJ0bi5wcm90b3R5cGUuc2Nyb2xsRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgaWYgKGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID4gMjAgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA+IDIwKSB7XHJcbiAgICAgICAgc2VsZi50b3BCdG4uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2VsZi50b3BCdG4uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG59O1xyXG5cclxuVG9wQnRuLnByb3RvdHlwZS5saXN0ZW5Ub3BCdG4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnRvcEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSAwOyAvLyBGb3IgU2FmYXJpXHJcbiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IDA7IC8vIEZvciBDaHJvbWUsIEZpcmVmb3gsIElFIGFuZCBPcGVyYVxyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5BdXRoLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlblNob3dIaWRlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU3dpdGNoRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU2lnbmluRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuSW1nQ2FwdGNoYUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblNtc0NhcHRjaGFFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TaWdudXBFdmVudCgpO1xyXG5cclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLnNob3dFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUuaGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5tYXNrV3JhcHBlci5oaWRlKCk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5zbXNTdWNjZXNzRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBtZXNzYWdlQm94LnNob3dTdWNjZXNzKCdTZW5kIGVtYWlsIHN1Y2Nlc3MhJyk7XHJcbiAgICBzZWxmLnNtc0NhcHRjaGEuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICB2YXIgY291bnQgPSAzMDtcclxuICAgIHNlbGYuc21zQ2FwdGNoYS51bmJpbmQoJ2NsaWNrJyk7XHJcbiAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnRleHQoY291bnQgKyAncycpO1xyXG4gICAgICAgIGNvdW50IC09IDE7XHJcbiAgICAgICAgaWYgKGNvdW50IDw9IDApIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XHJcbiAgICAgICAgICAgIHNlbGYuc21zQ2FwdGNoYS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnRleHQoJ1NlbmQgQ29kZScpO1xyXG4gICAgICAgICAgICBzZWxmLmxpc3RlblNtc0NhcHRjaGFFdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIDEwMDApO1xyXG59O1xyXG5cclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNob3dIaWRlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc2lnbmluQnRuID0gJCgnLnNpZ25pbi1idG4nKTtcclxuICAgIHZhciBzaWdudXBCdG4gPSAkKCcuc2lnbnVwLWJ0bicpO1xyXG4gICAgdmFyIGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ0bicpXHJcbiAgICB2YXIgc2Nyb2xsV3JhcHBlciA9ICQoJy5zY3JvbGwtd3JhcHBlcicpO1xyXG4gICAgc2lnbmluQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNob3dFdmVudCgpO1xyXG4gICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3Moe1wibGVmdFwiOiAwfSk7XHJcbiAgICB9KTtcclxuICAgIHNpZ251cEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zaG93RXZlbnQoKTtcclxuICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHtcImxlZnRcIjogLTQwMH0pO1xyXG5cclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblN3aXRjaEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHN3aXRjaGVyID0gJChcIi5zd2l0Y2hcIik7XHJcbiAgICBzd2l0Y2hlci5jbGljayhmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBjdXJyZW50TGVmdCA9IHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoXCJsZWZ0XCIpO1xyXG4gICAgICAgIGN1cnJlbnRMZWZ0ID0gcGFyc2VJbnQoY3VycmVudExlZnQpO1xyXG4gICAgICAgIGlmIChjdXJyZW50TGVmdCA8IDApIHtcclxuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOiBcIjBcIn0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjogXCItNDAwcHhcIn0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuSW1nQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGltZ0NhcHRjaGEgPSAkKCcuaW1nLWNhcHRjaGEnKTtcclxuICAgIGltZ0NhcHRjaGEuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJzc3NzXCIpO1xyXG4gICAgICAgIGltZ0NhcHRjaGEuYXR0cihcInNyY1wiLCBcIi9hY2NvdW50L2ltZ19jYXB0Y2hhL1wiICsgXCI/cmFuZG9tPVwiICsgTWF0aC5yYW5kb20oKSlcclxuICAgIH0pO1xyXG5cclxufTtcclxuXHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc21zQ2FwdGNoYSA9ICQoXCIuc21zLWNhcHRjaGEtYnRuXCIpO1xyXG4gICAgdmFyIGVtYWlsQWRkcmVzc0lucHV0ID0gJChcIi5zaWdudXAtZ3JvdXAgaW5wdXRbbmFtZT0nZW1haWwnXVwiKTtcclxuICAgIHNtc0NhcHRjaGEuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbWFpbEFkZHJlc3MgPSBlbWFpbEFkZHJlc3NJbnB1dC52YWwoKTtcclxuICAgICAgICBpZiAoIWVtYWlsQWRkcmVzcykgeyAvLyBZb3UgbmVlZCB0byBjaGVjayB3aGV0aGVyIGVtYWlsIGlzIHZhbGlkIGhlcmVcclxuICAgICAgICAgICAgbWVzc2FnZUJveC5zaG93SW5mbyhcIlBsZWFzZSBpbnB1dCB5b3VyIGVtYWlsIGFkZHJlc3MhXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBscGFqYXguZ2V0KHtcclxuICAgICAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvc21zX2NhcHRjaGEnLFxyXG4gICAgICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2VtYWlsJzogZW1haWxBZGRyZXNzXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNtc1N1Y2Nlc3NFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnZmFpbCc6IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaWduaW5FdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzaWduaW5Hcm91cCA9ICQoJy5zaWduaW4tZ3JvdXAnKTtcclxuICAgIHZhciBlbWFpbElucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J2VtYWlsJ11cIik7XHJcbiAgICB2YXIgcGFzc3dvcmRJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZCddXCIpO1xyXG4gICAgdmFyIHJlbWVtYmVySW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncmVtZW1iZXInXVwiKTtcclxuXHJcbiAgICB2YXIgc3VibWl0QnRuID0gc2lnbmluR3JvdXAuZmluZChcIi5zdWJtaXQtYnRuXCIpO1xyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZW1haWwgPSBlbWFpbElucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZCA9IHBhc3N3b3JkSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHJlbWVtYmVyID0gcmVtZW1iZXJJbnB1dC5wcm9wKFwiY2hlY2tlZFwiKTtcclxuICAgICAgICBwbHBhamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9hY2NvdW50L2xvZ2luLycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ2VtYWlsJzogZW1haWwsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCxcclxuICAgICAgICAgICAgICAgICdyZW1lbWJlcic6IHJlbWVtYmVyID8gMSA6IDBcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmhpZGVFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnbnVwRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2lnbnVwR3JvdXAgPSAkKCcuc2lnbnVwLWdyb3VwJyk7XHJcbiAgICB2YXIgc3VibWl0QnRuID0gc2lnbnVwR3JvdXAuZmluZCgnLnN1Ym1pdC1idG4nKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdtYW4hJyk7XHJcbiAgICAgICAgdmFyIGVtYWlsSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nZW1haWwnXVwiKTtcclxuICAgICAgICB2YXIgdXNlcm5hbWVJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd1c2VybmFtZSddXCIpO1xyXG4gICAgICAgIHZhciBpbWdDYXB0Y2hhSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0naW1nX2NhcHRjaGEnXVwiKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQxSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQxJ11cIik7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMklucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMiddXCIpO1xyXG4gICAgICAgIHZhciBzbXNDYXB0Y2hhSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nc21zX2NhcHRjaGEnXVwiKTtcclxuXHJcbiAgICAgICAgdmFyIGVtYWlsID0gZW1haWxJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgdXNlcm5hbWUgPSB1c2VybmFtZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBpbWdfY2FwdGNoYSA9IGltZ0NhcHRjaGFJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQxID0gcGFzc3dvcmQxSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMiA9IHBhc3N3b3JkMklucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBzbXNfY2FwdGNoYSA9IHNtc0NhcHRjaGFJbnB1dC52YWwoKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnZHVkZScpO1xyXG4gICAgICAgIHBscGFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvcmVnaXN0ZXIvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnZW1haWwnOiBlbWFpbCxcclxuICAgICAgICAgICAgICAgICd1c2VybmFtZSc6IHVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgJ2ltZ19jYXB0Y2hhJzogaW1nX2NhcHRjaGEsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQxJzogcGFzc3dvcmQxLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMic6IHBhc3N3b3JkMixcclxuICAgICAgICAgICAgICAgICdzbXNfY2FwdGNoYSc6IHNtc19jYXB0Y2hhXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09IDIwMClcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGF1dGggPSBuZXcgQXV0aCgpO1xyXG4gICAgYXV0aC5ydW4oKTtcclxufSk7XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBmcm9udEJhc2UgPSBuZXcgRnJvbnRCYXNlKCk7XHJcbiAgICBmcm9udEJhc2UucnVuKCk7XHJcbn0pO1xyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBUT1AgPSBuZXcgVG9wQnRuKCk7XHJcbiAgICBUT1AucnVuKCk7XHJcbn0pO1xyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0ZW1wbGF0ZSkge1xyXG4gICAgICAgIHRlbXBsYXRlLmRlZmF1bHRzLmltcG9ydHMudGltZVNpbmNlID0gZnVuY3Rpb24gKGRhdGVWYWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGVWYWx1ZSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRldHMgPSBkYXRlLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgdmFyIG5vd3RzID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IChub3d0cyAtIGRhdGV0cykgLyAxMDAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRpbWVzdGFtcCA8IDYwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0p1c3QgTm93JztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgJiYgdGltZXN0YW1wIDwgNjAgKiA2MCkge1xyXG4gICAgICAgICAgICAgICAgbWludXRlcyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtaW51dGVzICsgJyBNaW51dGVzJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgKiA2MCAmJiB0aW1lc3RhbXAgPCA2MCAqIDYwICogMjQpIHtcclxuICAgICAgICAgICAgICAgIGhvdXJzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLyA2MCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaG91cnMgKyAnIEhvdXJzJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgKiA2MCAqIDI0ICYmIHRpbWVzdGFtcCA8IDYwICogNjAgKiAyNCAqIDMwKSB7XHJcbiAgICAgICAgICAgICAgICBkYXlzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLyA2MCAvIDI0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXlzICsgJyBEYXlzJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaG91ciA9IGRhdGUuZ2V0SG91cnMoKTtcclxuICAgICAgICAgICAgICAgIHZhciBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBob3VyICsgXCI6XCIgKyBtaW51dGUgKyBcIiBcIiArIGRheSArIFwiL1wiICsgbW9udGggKyBcIi9cIiArIHllYXI7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuXHJcblxyXG4iXX0=
